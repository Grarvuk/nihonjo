body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f0f2f5;
    color: #333;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
}

header { margin: 2rem 0; }

.card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    width: 100%;
    text-align: center;
}

body {
    width: 100%;
}

.top-nav, 
#exercice .top-nav, 
#section-ajout .top-nav, 
#section-cours .top-nav {
    max-width: 800px;
    width: 95vw;
    margin: 0 auto 10px auto; /* Centre la navigation */
    display: flex;
    justify-content: flex-start;
}

.hidden { display: none !important; }

.statut-badge { color: #888; font-size: 0.9rem; margin-bottom: 1rem; }

input {
    width: 100%;
    padding: 12px;
    margin: 1rem 0;
    border: 2px solid #ddd;
    border-radius: 8px;
    box-sizing: border-box;
    font-size: 1.1rem;
}

button {
    padding: 10px 20px !important;
    border: none;
    border-radius: 6px;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.1s;
}

.input-wrapper {
    display: flex;
    gap: 5px;
    align-items: center;
}

#btn-clavier {
    background: #f8f9fa;
    border: 2px solid #ddd;
    font-size: 1.5rem;
    padding: 5px 10px;
}

#keyboard-container {
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 10px;
    margin-top: 10px;
}

.keyboard-tabs {
    display: flex;
    gap: 5px;
    margin-bottom: 10px;
}

.keyboard-tabs button {
    flex: 1;
    font-size: 0.8rem;
    padding: 5px;
    background: #e9ecef;
}

#keyboard-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5 colonnes : A I U E O */
    gap: 5px;
    max-height: 300px;
    overflow-y: auto;
}

#keyboard-accents {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 5px;
    margin-top: 10px;
}

#keyboard-accents .key {
    background: #fdf2f2; /* Légère couleur différente pour les distinguer */
    font-size: 1rem;
    padding: 8px;
}

hr {
    border: 0;
    border-top: 1px solid #eee;
    margin: 15px 0;
}

.key-empty {
    background: #f8f9fa;
    border: 1px dashed #ddd;
    cursor: default;
}

.key:hover:not(:disabled) {
    background: #4a90e2;
    color: white;
}

.key {
    padding: 10px;
    background: #f0f2f5;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1.2rem;
}

#checkboxes-chapitres {
    display: flex;
    flex-direction: column; /* Force l'empilement vertical */
    gap: 15px;              /* Espacement entre les catégories */
    width: 100%;            /* Prend toute la largeur de la carte */
    background: transparent;
    padding: 0;
}

.categorie-groupe {
    display: block;         /* Comportement de bloc standard */
    width: 100%;            /* Largeur totale */
    background: #fff;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    padding: 15px;
    text-align: left;
    box-sizing: border-box; /* Évite que le padding ne dépasse de la largeur */
}

.categorie-groupe h4 {
    margin: 0 0 10px 0;
    color: #4a90e2;
    font-size: 0.9rem;
    text-transform: uppercase;
    border-bottom: 1px solid #f0f0f0;
    padding-bottom: 5px;
}

.categorie-items {
    display: flex;
    flex-wrap: wrap;        /* Permet de revenir à la ligne si besoin */
    gap: 10px;              /* Espace entre les badges de chapitres */
    margin-top: 10px;
}

.chapitre-item {
    flex: 0 1 auto;         /* Ne force pas une largeur fixe */
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 8px;
    background: #f8f9fa;
    padding: 8px 14px;
    border: 1px solid #dee2e6;
    border-radius: 20px;    /* Look "pilule" plus moderne */
    white-space: nowrap;
    cursor: pointer;
}

.chapitre-item:hover {
    background-color: #f1f3f5;
}

#export-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8); /* Fond sombre transparent */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    max-width: 600px;
    width: 90%;
}

#json-output {
    width: 100%;
    height: 300px;
    font-family: 'Consolas', monospace;
    font-size: 0.8rem;
    background: #1e1e1e;
    color: #d4d4d4;
    padding: 10px;
    margin: 15px 0;
    border-radius: 4px;
    resize: none;
}

/* Style pour les menus déroulants (Select) */
select {
    width: 100%;
    padding: 12px;
    margin: 0.5rem 0 1rem 0;
    border: 2px solid #ddd;
    border-radius: 8px;
    background-color: white;
    font-size: 1rem;
    cursor: pointer;
    appearance: none; /* Supprime le style par défaut du navigateur */
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    background-size: 1em;
}

select:focus {
    outline: none;
    border-color: #4a90e2;
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
}

/* Container pour aligner le label et le select dans le formulaire d'ajout */
.select-wrapper {
    text-align: left;
    display: flex;
    flex-direction: column;
}

/* Ajustement pour que les selects dans la grille de formulaire ne cassent pas le layout */
.form-grid select {
    margin-top: 5px;
}

select option[value="indéterminé"] {
    font-style: italic;
    color: #888;
}

#mot-a-deviner {
    letter-spacing: 5px; /* Espace les caractères pour mieux voir le trou */
    font-size: 2.5rem;
    color: #2c3e50;
}

#kanji-propositions {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin: 20px 0;
    padding: 15px;
    background: #f0f4f8;
    border-radius: 12px;
    border: 2px solid #cbd5e0;
}

.kanji-key {
    font-size: 1.8rem;
    padding: 15px 5px;
    background: white;
    border: 1px solid #a0aec0;
    transition: transform 0.1s, background-color 0.2s;
}

.kanji-key:hover {
    background-color: #ebf8ff;
    transform: scale(1.05);
    border-color: #4299e1;
}

/* Conteneur principal des propositions */
#kanji-propositions {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5 colonnes pour faire 2 lignes de 5 */
    gap: 10px;
    padding: 15px;
    background-color: #f0f4f8; /* Fond légèrement bleuté comme sur l'image */
    border: 1px solid #d1d9e6;
    border-radius: 12px;
    margin: 20px auto;
    max-width: 400px;
}

/* Style des tuiles de Kanjis */
.kanji-tile {
    aspect-ratio: 2 / 3; /* Format rectangulaire vertical */
    background: white;
    border: 1px solid #cbd5e0;
    border-radius: 8px;
    font-size: 2rem;
    font-weight: bold;
    color: #1a202c;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    transition: all 0.2s ease;
}

.kanji-tile:hover {
    border-color: #4a90e2;
    background-color: #ebf8ff;
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.kanji-tile:active {
    transform: translateY(0);
}

.status-badge-small {
    display: inline-block;
    padding: 2px 8px;
    font-size: 0.7rem;
    border-radius: 10px;
    margin-bottom: 10px;
    font-weight: bold;
    text-transform: uppercase;
}

.cours-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    text-align: left;
}

.cours-table th, .cours-table td {
    padding: 12px;
    border-bottom: 1px solid #eee;
}

.cours-table th {
    background-color: #f8f9fa;
    color: #333;
    font-size: 0.9rem;
}

.cours-table tr:hover {
    background-color: #fcfcfc;
}

.cours-table small {
    color: #666;
    font-style: italic;
}

/* Permet à la carte de s'élargir pour le mode cours */
.card-wide {
    width: 75% !important;
    margin-left: 10% !important;
}

.cours-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.cours-table th {
    text-align: left;
    border-bottom: 2px solid #4a90e2;
    padding: 10px;
    font-size: 0.8rem;
    color: #4a90e2;
    text-transform: uppercase;
}

.cours-table td {
    padding: 15px 10px;
    border-bottom: 1px solid #eee;
    vertical-align: middle;
}

.kanji-main {
    font-size: 1.4rem;
    font-weight: bold;
    color: #2c3e50;
}

.kana-sub {
    font-size: 0.9rem;
    color: #7f8c8d;
}

/* Ajustement pour les badges dans le tableau */
.cours-table .status-badge-small {
    padding: 4px 10px;
    font-size: 0.65rem;
    white-space: nowrap;
    display: inline-block;
    border-radius: 4px; /* Plus carré pour le tableau */
}

/* On s'assure que les colonnes ont assez de place */
.cours-table th:nth-child(3) {
    width: 100px;
    text-align: center;
}

/* Barre de navigation en haut des sections */
.top-nav {
    position: sticky;
    top: 0;
    z-index: 100;
    width: 100%;
    display: flex;
    justify-content: flex-start;
    background-color: #f0f2f5; /* Même couleur que ton body pour être invisible */
    padding: 10px 0;
    margin-bottom: 10px;
}

.top-nav button {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    white-space: nowrap;
}

/* Cas particulier pour la section cours qui est plus large */
#section-cours .top-nav {
    max-width: 800px;
    margin: 0 auto 15px auto;
}

/* Version miniature du bouton quitter */
.btn-quit-small {
    background: transparent;
    color: #dc3545;
    border: 1px solid #dc3545;
    padding: 5px 12px;
    font-size: 0.8rem;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s;
}

/* Spécifique pour l'exercice et l'ajout */
#exercice .top-nav, #section-ajout .top-nav {
    max-width: 500px;
    margin: 0 auto 15px auto;
}

.btn-quit-small:hover {
    background: #dc3545;
    color: white;
}

.bouton-exo {
    width: 49% !important; /* Force la largeur à 50% moins l'espace du gap */
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    padding: 12px 5px !important;
}

/* Ajustement pour les petits boutons de retour */
.btn-small {
    padding: 6px 10px !important;
    font-size: 0.75rem;
    display: inline-flex;
    align-items: center;
    gap: 5px;
}


/* Styles pour le mode Écriture */
.drill-input-success {
    border-color: #28a745 !important;
    background-color: #f1fdf4 !important;
    box-shadow: 0 0 10px rgba(40, 167, 69, 0.2);
}

.drill-input-error {
    border-color: #dc3545 !important;
    background-color: #fdf2f2 !important;
    animation: shake 0.3s;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.dots-grid {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 10px;
}

.dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #ddd;
}

.dot.active {
    background: #28a745;
    transform: scale(1.2);
}

.actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}

/* Ajustement de la colonne Action dans le tableau */
.cours-table th:last-child, .cours-table td:last-child {
    width: 60px;
    text-align: center;
}

#drill-aide-jp {
    transition: opacity 0.2s ease-in-out;
    min-height: 1.5em; /* Évite que la carte ne change de taille */
}

/* Container du Tooltip */
.tooltip {
    position: relative;
    display: inline-block;
    line-height: 0; /* Aligne l'icône verticalement */
}

/* Texte du Tooltip (caché par défaut) */
.tooltip .tooltiptext {
    visibility: hidden;
    width: 200px;
    background-color: #333;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding: 10px;
    position: absolute;
    z-index: 1000;
    bottom: 125%; /* Positionne au-dessus de l'icône */
    left: 50%;
    margin-left: -100px; /* Centre le tooltip */
    opacity: 0;
    transition: opacity 0.3s;
    font-size: 0.8rem;
    line-height: 1.4;
    pointer-events: none; /* Évite de bloquer le clic */
}

/* Petite flèche en bas du tooltip */
.tooltip .tooltiptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #333 transparent transparent transparent;
}

/* Affiche le tooltip au survol */
.tooltip:hover .tooltiptext {
    visibility: visible;
    opacity: 1;
}

/* Bouton de suppression dans la gestion du lexique */
.btn-quit-small {
    background: transparent;
    color: #e74c3c;
    border: 1px solid #e74c3c;
    padding: 5px 8px !important;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-quit-small:hover {
    background: #e74c3c;
    color: white;
}

/* On s'assure que le tableau ne déborde pas sur mobile */
#liste-gestion-lexique {
    overflow-x: auto;
}

#import-confirm-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

#import-confirm-modal .modal-content {
    max-width: 500px; /* On le garde un peu plus étroit pour l'aspect boîte de dialogue */
    padding: 30px;
}

.centrer{
    display: flex !important;
    justify-content: center !important;
}

#import-confirm-modal h3 {
    color: #4a90e2;
    margin-bottom: 20px;
}

.col-fr { font-weight: 500; width: 30%; }
.col-jp { width: 40%; }
.col-context { font-style: italic; color: #95a5a6; font-size: 0.85rem; }

.status-non-acquis { background: #e0e0e0; color: #666; }
.status-a-revoir { background: #ffdce0; color: #af233a; }
.status-acquis { background: #dcffe4; color: #1e7e34; }

.key:hover { background: #e2e6ea; }

.key-special { background: #ffeeba; } /* Pour effacer ou l'espace */

button:active { transform: scale(0.95); }

.btn-primary { background-color: #4a90e2; color: white; }
.btn-secondary { background-color: #6c757d; color: white; }
.btn-next { background-color: #28a745; color: white; width: 100%; margin-top: 1rem; }
.btn-quit { background-color: transparent; color: #dc3545; margin-top: 2rem; text-decoration: underline; }

#contexte-aide { font-style: italic; color: #666; min-height: 1.2rem; }
#resultat-texte { font-weight: bold; font-size: 1.2rem; }
#correction-details { text-align: left; background: #f8f9fa; padding: 1rem; border-radius: 6px; margin-top: 10px; }